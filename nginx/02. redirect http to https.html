server {
       listen         80;
       server_name    my.domain.com;
       return         301 https://$server_name$request_uri;
}

server {
       listen         443 ssl;
       server_name    www.nicolasxu.space nicolasxu.space;
       # add Strict-Transport-Security to prevent man in the middle attacks
       add_header Strict-Transport-Security "max-age=31536000"; 
  
      
       ssl_certificate /root/.ssh/nicolasxu.space.cert;
       ssl_certificate_key /root/nicolasxu.space.key;
       [....]
}


<h1>https://serverfault.com/questions/67316/in-nginx-how-can-i-rewrite-all-http-requests-to-https-while-maintaining-sub-dom</h1>